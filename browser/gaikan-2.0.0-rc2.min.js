!function(){function e(){return e}function t(e,n){var i=t.resolve(e),a=t.modules[i];if(!a)throw new Error('failed to require "'+e+'" from '+n);return a.exports||(a.exports={},a.call(a.exports,a,a.exports,t.relative(i),r)),a.exports}var r=this;t.modules={},t.resolve=function(e){var r=e,n=e+".js",i=e+"/index.js";return t.modules[n]&&n||t.modules[i]&&i||r},t.register=function(e,r){t.modules[e]=r},t.relative=function(r){return function(n){if("debug"==n)return e;if("."!=n.charAt(0))return t(n);var i=r.split("/"),a=n.split("/");i.pop();for(var s=0;s<a.length;s++){var o=a[s];".."==o?i.pop():"."!=o&&i.push(o)}return t(i.join("/"),r)}},t.register("browser/index.js",function(e,t,r){"use strict";var n=r("./../compiler"),i=r("./../runtime");e.exports=function(e){return"(CLIENT-NOT-IMPLEMENTED("+e+"))"},e.exports.alterant=i.alterant,e.exports.compileFromString=function(t){var r=e.exports.options;return n(t,r.enableCompression)},e.exports.options={enableCompression:!1},e.exports.set=i.set}),t.register("compiler/analyzer/lexer-analyzer.js",function(e){"use strict";var t,r;e.exports=function(e){for(var t=!1,n=!1,i=0,a=null,s=0,o=[],u=0;u<e.length;u+=1){var l=e.charAt(u);if(n)t||"'"!==l&&'"'!==l||null!==a&&a!==l||(a=null===a?l:null),">"!==l||null!==a||t&&!/^-->$/.test(e.substr(u-2,3))||(r(o,e,i,u+1),t=n=!1,i=u+1);else if("<"===l){var f=e.substr(u,9),p=/^<!--/.test(f);(p||/^(<!DOCTYPE|<\/?[a-z])/i.test(f))&&(r(o,e,i,u),t=p,n=!0,i=u)}s=l}return r(o,e,i,e.length),o},t=function(e){var t=[],r=e.match(/^<[a-z0-9]+\s+?([\w\W]*?)\s?\/?>?$/i);if(r){var n=-1,i=null;e=r[1];for(var a=n+1;a<=e.length;a+=1){var s=a===e.length,o=s?null:e.charAt(a);if("'"!==o&&'"'!==o||null!==i&&i!==o||(i=null===i?o:null),s||null===i&&/^\s$/.test(o)){var u=e.substr(n+1,a-n-1),l=u.indexOf("=");if(-1!==l){var f={key:u.substr(0,l),value:u.substr(l+1)},p=f.value.length;(f.quote=p&&/"|'/.test(f.value.charAt(0))?f.value.charAt(0):null)&&(f.value.charAt(0)===f.quote&&(f.value=f.value.substr(1),p-=1),f.value.charAt(p-1)===f.quote&&(f.value=f.value.substr(0,p-1),f.hasEndQuote=!0)),t.push(f)}else"/"!==u&&t.push({key:u});n=a}}}return t},r=function(e,r,n,i){if(n!==i){var a=r.substr(n,i-n),s={value:a,position:n,type:"element"};e.push(s),"<"===a[0]&&/>$/.test(a)?/^<!--/.test(a)?s.type="comment":/^<!DOCTYPE/i.test(a)?s.type="doctype":(s.name=a.match(/^<\/?([a-z0-9]*)/i)[1],s.name?(s.isBeginning=/^<[a-z0-9]/i.test(a))?(s.attributes=t(a),s.isStandalone=/\/>$/.test(a)):(s.attributes=[],s.isStandalone=!1):s.type="text"):s.type="text"}}}),t.register("compiler/analyzer/parser-analyzer.js",function(e){"use strict";var t,r,n;e.exports=function(e){return r(e,"script"),r(e,"style"),t(e),n(e)},t=function(e){for(var r=!1,n=0;n<e.length;n+=1){var i=e[n];if(i.index=n,"undefined"==typeof i.association&&"element"===i.type&&i.isBeginning&&!i.isStandalone)for(var a=n+1;a<e.length;a+=1){var s=e[a];if("undefined"==typeof s.association&&"element"===s.type&&!s.isBeginning&&i.name.toLowerCase()===s.name.toLowerCase()){for(var o=a-1;o>=n;o-=1){var u=e[o];if("undefined"==typeof u.association&&"element"===u.type&&u.isBeginning&&!u.isStandalone&&u.name.toLowerCase()===s.name.toLowerCase()){n===o&&(r=!0,i.association=a,s.association=n);break}}break}}}r&&t(e)},r=function(e,t){for(var r=!1,n=0;n<e.length;n+=1){var i=e[n];"element"!==i.type||i.isStandalone||i.name.toLowerCase()!==t.toLowerCase()?r&&(i.type="text",delete i.attributes,delete i.name,delete i.isBeginning,delete i.isStandalone):r=i.isBeginning}},n=function(e){for(var t=0,r=[],n=[r],i=0;i<e.length;i+=1){var a=e[i],s="undefined"!=typeof a.association;s&&a.association<i&&(t-=1,n.pop()),a.indent=t,n[n.length-1].push(a),s&&a.association>i&&(t+=1,a.children=[],n.push(a.children))}return r}}),t.register("compiler/build-compiler.js",function(e,t,r){"use strict";var n,i,a,s,o,u,l,f,p,c=r("./emitter-compiler");e.exports=function(e,t){for(var r=[],i=0;i<e.length;i+=1)n(r,e,e[i]);return new Function("__r","root","__f",s(r,t).join("\n"))},n=function(e,t,r){var a;switch(r.type){case"element":if(r.isBeginning){var s,o=r.attributes,u=e.length;if(r.attributes=i(e,t,r),u!==e.length&&(s=e.splice(u,e.length-u)),f(e,r),r.attributes=o,s)for(a=0;a<s.length;a+=1)e.push(s[a])}if(r.children)for(a=0;a<r.children.length;a+=1)n(e,t,r.children[a]);r.isBeginning||(i(e,t,r),f(e,r));break;case"text":f(e,r);break;default:e.push({type:"text",value:r.value})}},i=function(e,t,r){var n,i=[];if(r.isBeginning)i=r.attributes.slice(0);else if("undefined"!=typeof r.association){var a;for(n=0;n<t.length;n+=1)null!==(a=o(t[n],r.association))&&(i=a.attributes.slice(0))}for(n=0;n<i.length;n+=1){var s=i[n],f=s.key.toLowerCase();for(var p in c)if(c.hasOwnProperty(p)&&new RegExp("^"+p+"$").test(f)){c[p](e,r,s,u,l)&&(i.splice(n,1),n-=1);break}}return i},a=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].value&&-1!==e[r].value.indexOf(t))return!0;return!1},s=function(e,t){var r=1,n=e.slice(0);n.unshift({value:"var __o = '';"}),n.push({value:"return __o;"}),a(e,"set")&&n.unshift({value:"var set = __r.set;"}),a(e,"alterant")&&n.unshift({value:"var alterant = __r.alterant;"});for(var i=0,s=1;i<n.length;i+=1,s+=1)s<n.length&&"text"===n[i].type&&"text"===n[s].type?(n[i].value+=n[s].value,n.splice(s,1),i-=1,s-=1):"text"===n[i].type&&(t&&(n[i].value=n[i].value.replace(/\s+/g," ")),n[i].value="'"+l(n[i].value)+"'");for(i=0,s=1;i<n.length;i+=1,s+=1){var o=n[i].type,u="var"===o||"text"===o;s<n.length&&u&&("var"===n[s].type||"text"===n[s].type)?(n[i].value+=" + "+n[s].value,n.splice(s,1),i-=1,s-=1):u&&(n[i].value="__o += "+n[i].value+";")}for(i=0;i<n.length;i+=1)if(n[i].indent<0&&(r-=-n[i].indent),"undefined"==typeof n[i].value)n.splice(i,1),i-=1;else{for(var f=0;r>f;f+=1)n[i].value="	"+n[i].value;n[i].indent>0&&(r+=n[i].indent),n[i]=n[i].value}return n},o=function(e,t){if(e.index===t)return e;if(e.children)for(var r=0;r<e.children.length;r+=1){var n=o(e.children[r],t);if(n)return n}return null},u=function(){var e=arguments;return this.replace(/\{(\d+)\}/g,function(t,r){return"undefined"!=typeof e[r]?e[r]:t})},l=function(e){for(var t="",r=0;r<e.length;r+=1)switch(e.charAt(r)){case"'":t+="\\'";break;case"\\":t+="\\\\";break;case"\b":t+="\\b";break;case"\f":t+="\\f";break;case"\n":t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;default:t+=e.charAt(r)}return t},f=function(e,t){var r=t.value;if("element"===t.type){if(!t.name)return;r=(t.isBeginning?"<":"</")+t.name;for(var n=0;n<t.attributes.length;n+=1){var i=t.attributes[n],a=i.quote?i.quote:"",s=i.hasEndQuote?a:"";if(r+=" "+i.key,"undefined"!=typeof i.value){var o=[];if(i.value=p(o,i.value,!0),o.length){r+="="+a,e.push({type:"text",value:r});for(var u=0;u<o.length;u+=1)e.push(o[u]);r=i.value+s}else r+="="+a+i.value+s}}t.disableClosingTag||(r+=t.isStandalone?" />":">")}else"text"===t.type&&(r=p(e,r));r&&e.push({type:"text",value:r})},p=function(e,t,r){for(var n,i,a,s,o=-1,l=/(@|\#|\!)\{([\w\W]+?)\}/g,f=function(e,t){return u.call(e,a,s,t)};null!==(i=l.exec(t));){var p=i[1];if(a=i[2],0!==i.index){var c=-1===o?0:o,v=t.substr(c,i.index-c);v&&e.push({type:"text",value:v})}if("@"===p)e.push({type:r?"var":"emit",value:r?"("+a+")":a});else{if(s=a,-1!==(n=a.search(/[|,]/))){var d=a.substr(n+1).split(/[|,]/);a=s=s.substr(0,n),"#"===p&&(s=f("alterant.encode({1})"));for(var g=0;g<d.length;g+=1)(d[g]=d[g].trim()).length&&(s=f("alterant.{2}({1})",d[g]))}else"#"===p&&(s=f("alterant.encode({1})"));e.push({type:"var",value:f("(typeof {0} === 'undefined' ? '' : {1})")})}o=i.index+i[0].length}return-1===o?t:t.substr(o)}}),t.register("compiler/emitter-compiler.js",function(e,t,r){"use strict";e.exports={"data-attribute-[\\w\\W]+":r("./emitter/attribute-emitter"),"data-evaluate":r("./emitter/evaluate-emitter"),"data-extract":r("./emitter/extract-emitter"),"data-for":r("./emitter/for-emitter"),"data-fragment":r("./emitter/fragment-emitter"),"data-if":r("./emitter/if-emitter"),"data-include":r("./emitter/include-emitter")}}),t.register("compiler/emitter/attribute-emitter.js",function(e){"use strict";e.exports=function(e,t,r,n,i){if(t.disableClosingTag=t.isBeginning,!t.isBeginning)return e.push({indent:-1,type:"if",value:"}"}),e.push({type:"text",value:t.isStandalone?" />":">"}),!0;if("undefined"!=typeof t.association&&!t.isStandalone){var a=r.key.match(/^[\w\W]+-([\w\W]+?)$/)[1];return e.push({indent:1,type:"attribute",value:n.call("if ({0}) {",r.value||!1)}),e.push({type:"attribute",value:n.call("__o += ' {0}';",i(a))}),t.disableClosingTag=!0,!0}return!1}}),t.register("compiler/emitter/evaluate-emitter.js",function(e){"use strict";var t;e.exports=function(e,r){return"undefined"==typeof r.association||r.isStandalone?!1:(delete r.name,t(e,r),!0)},t=function(e,r){if(r.children)for(var n=0;n<r.children.length;n+=1){var i=r.children[n];e.push({type:"eval",value:i.value}),delete i.name,delete i.value,t(e,i)}}}),t.register("compiler/emitter/extract-emitter.js",function(e){"use strict";e.exports=function(e,t){return delete t.name,!0}}),t.register("compiler/emitter/for-emitter.js",function(e){"use strict";e.exports=function(e,t,r,n){var i=/^([\w\W]+?)(,\s*([\w\W]*))?\s(in|of)\s([\w\W]+)$/i,a=(r.value||"").match(i);if("undefined"!=typeof t.association&&null!==a){if(!t.isBeginning)return"of"===a[4].toLowerCase()&&e.push({indent:-1,type:"for",value:"}"}),e.push({indent:-1,type:"for",value:"}"}),e.push({indent:-1,type:"for",value:"}"}),!0;if(!t.isStandalone){var s=function(e){return n.call(e,"__v"+t.index,a[1],a[3]||"__k"+t.index,a[5])};return e.push({type:"for",value:s("var {0} = {3};")}),e.push({indent:1,type:"for",value:s("if ({0}) {")}),"of"===a[4].toLowerCase()?(e.push({indent:1,type:"for",value:s("for (var {2} in {0}) {")}),e.push({indent:1,type:"for",value:s("if ({0}.hasOwnProperty({2})) {")})):e.push({indent:1,type:"for",value:s("for (var {2} = 0; {2} < {0}.length; {2} += 1) {")}),e.push({type:"for",value:s("var {1} = {0}[{2}];")}),!0}}return!1}}),t.register("compiler/emitter/fragment-emitter.js",function(e){"use strict";var t;e.exports=function(e,r,n,i,a){var s=e.states;if(!n.value||"undefined"==typeof r.association)return!1;if(s&&s.length){var o=e.states[e.states.length-1];r.isBeginning?(e.push({indent:1,type:"fragment",value:i.call("{0}['{1}'] = function (__r, root) {",o.fragment,a(n.value))}),e.push({type:"fragment",value:"var __o = '';"})):(e.push({type:"fragment",value:"return __o;"}),e.push({indent:-1,type:"fragment",value:"};"}))}else r.isBeginning?(e.push({indent:1,type:"fragment",value:i.call("if (__f && __f['{0}']) {",a(n.value))}),e.push({type:"fragment",value:i.call("__o += __f['{0}'](__r, root);",a(n.value))})):(e.push({indent:-1,type:"fragment",value:"}"}),t(e));return!0},t=function(e){for(var t=0,r=e.length-1;r>=0;r-=1){var n=e[r].indent,i=e[r].type;if("undefined"!=typeof n&&"fragment"===i&&(t-=n,0===t))break;"fragment"!==i&&e.splice(r,1)}}}),t.register("compiler/emitter/if-emitter.js",function(e){"use strict";e.exports=function(e,t,r,n){return t.isBeginning?"undefined"==typeof t.association||t.isStandalone?!1:(e.push({indent:1,type:"if",value:n.call("if ({0}) {",r.value||!1)}),!0):(e.push({indent:-1,type:"if",value:"}"}),!0)}}),t.register("compiler/emitter/include-emitter.js",function(e){"use strict";var t,r;e.exports=function(e,n,i,a,s){var o,u=e.states;if(u||(u=e.states=[]),!i.value)return!1;if(n.isBeginning){var l=i.value.split(/[|,]/,2);o={hasPartial:t(n),fragment:"__f"+n.index,type:"include",variable:2===l.length?l[1]||"root":"root",value:l[0]},"undefined"==typeof n.association||n.association===n.index+1?(("undefined"==typeof n.association||n.isStandalone)&&delete n.name,e.push({type:"include",value:a.call("__o += __r('{0}', {1});",s(o.value),o.variable)})):o.hasPartial?(u.push(o),e.push({includeIndent:1,type:"include",value:a.call("var {0} = {};",o.fragment)})):(u.push(o),e.push({indent:1,type:"include",value:a.call("__o += __r('{0}', {1});",s(o.value),o.variable)}))}else n.association!==n.index-1&&(o=u.pop(),o.hasPartial?(e.push({type:"include",value:a.call("__o += __r('{0}', {1}, {2});",s(o.value),o.variable,o.fragment)}),e.push({includeIndent:-1,type:"include"})):e.push({indent:-1,type:"include"}),r(e));return!0},t=function(e){if(e.attributes)for(var r=0;r<e.attributes.length;r+=1)if("data-fragment"===e.attributes[r].key.toLowerCase())return!0;if(e.children)for(r=0;r<e.children.length;r+=1)if(t(e.children[r]))return!0;return!1},r=function(e){for(var t=0,r=0,n=e.length-1;n>=0;n-=1){var i=e[n].indent||e[n].includeIndent,a=!1,s=e[n].type;if("undefined"!=typeof i&&("fragment"===s&&(r-=i),"include"===s&&(a=t>r+1&&"fragment"!==s,t-=i,0===t)))break;(t>r&&"include"!==s&&"fragment"!==s||t>r+1&&"fragment"!==s||a)&&e.splice(n,1)}}}),t.register("compiler/index.js",function(e,t,r){"use strict";var n=r("./build-compiler"),i=r("./analyzer/lexer-analyzer"),a=r("./analyzer/parser-analyzer");e.exports=function(e,t){var r=i(e),s=a(r);return n(s,t)}}),t.register("index.js",function(e,t,r){e.exports=r("undefined"==typeof window?"./server":"./browser")}),t.register("runtime/alterant/break-alterant.js",function(e){"use strict";e.exports=function(e){return"string"!=typeof e?e:e.replace(/\n/g,"<br />")}}),t.register("runtime/alterant/decode-alterant.js",function(e){"use strict";e.exports=function(e){return"string"!=typeof e?e:e.replace(/&#([0-9]{2});/g,function(e,t){return String.fromCharCode(parseInt(t,10))})}}),t.register("runtime/alterant/encode-alterant.js",function(e){"use strict";var t=/[&<>"]/,r=/&/g,n=/</g,i=/>/g,a=/"/g;e.exports=function(e){return"string"==typeof e&&t.test(e)?e.replace(r,"&#38;").replace(n,"&#60;").replace(i,"&#62;").replace(a,"&#34;"):e}}),t.register("runtime/alterant/encode-windows-alterant.js",function(e){"use strict";var t=/[&<>"]/g,r={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;"};e.exports=function(e){return"string"==typeof e&&t.test(e)?e.replace(t,function(e){return r[e]}):e}}),t.register("runtime/alterant/lower-alterant.js",function(e){"use strict";e.exports=function(e){return"string"!=typeof e?e:e.toLowerCase()}}),t.register("runtime/alterant/title-alterant.js",function(e){"use strict";e.exports=function(e){return"string"!=typeof e?e:e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}}),t.register("runtime/alterant/upper-alterant.js",function(e){"use strict";e.exports=function(e){return"string"!=typeof e?e:e.toUpperCase()}}),t.register("runtime/alterant/url-alterant.js",function(e){"use strict";e.exports=function(e){return encodeURIComponent(e)}}),t.register("runtime/index.js",function(e,t,r){"use strict";var n="undefined"!=typeof process&&/win/.test(process.platform),i=n?"windows-alterant":"alterant";e.exports=function(e){return"(UNRESOLVED-TEMPLATE("+e+"))"},e.exports.alterant={"break":r("./alterant/break-alterant"),decode:r("./alterant/decode-alterant"),encode:r("./alterant/encode-"+i),lower:r("./alterant/lower-alterant"),title:r("./alterant/title-alterant"),upper:r("./alterant/upper-alterant"),url:r("./alterant/url-alterant")},e.exports.set={empty:r("./set/empty-set"),sort:r("./set/sort-set")}}),t.register("runtime/set/empty-set.js",function(e){"use strict";e.exports=function(e){if(!e)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}}),t.register("runtime/set/sort-set.js",function(e){"use strict";e.exports=function(e,t,r){if("boolean"!=typeof t&&(r=t,t=!1),e)if(e instanceof Array)e.length>1&&(r?e.sort(function(e,t){var n=e[r],i=t[r];return i>n?-1:n>i?1:0}):e.sort(),t&&e.reverse());else if(e instanceof Object){var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i);if(n.length>1){var a={};n.sort(),t&&n.reverse();for(var s=0;s<n.length;s+=1)a[n[s]]=e[n[s]];return a}}return e}}),t.register("server/index.js",function(e,t,r){"use strict";var n={},i=r("./../compiler"),a=r("fs"),s="production"===process.env.NODE_ENV,o=r("path"),u=r("./../runtime");e.exports=function(t,r,n,i,a){var s,o=e.exports.options,u=e.exports.compileFromFile(t);return"function"==typeof n&&(i=n,n={}),"boolean"==typeof i&&(a=i,i=null),s=!o.layout||a?u(e.exports,r,n||{}):e.exports(o.layout,r,{content:function(e,t){return u(e,t,n||{})}},!0),i?setImmediate(i,null,s):s},e.exports.alterant=u.alterant,e.exports.compileFromFile=function(t){var s=e.exports.options;if(s.enableCache&&"undefined"!=typeof n[t])return n[t];var u=function(){for(var n=o.dirname(r.main.filename),i=e.exports.options.directories,s=e.exports.options.extensions,u=0;u<i.length;u+=1)for(var l=o.join(n,i[u]),f=0;f<s.length;f+=1){var p=t+"."+s[f],c=o.join(l,p);if(a.existsSync(c))return c}return a.existsSync(t)?t:null}();if(u){var l=a.readFileSync(u,"utf8"),f=i(l,s.enableCompression);return s.enableCache&&(n[t]=f),f}return function(){return"(UNRESOLVED-TEMPLATE("+t+"))"}},e.exports.compileFromString=function(t){var r=e.exports.options;return i(t,r.enableCompression)},e.exports.options={directories:["views","."],enableCache:s,enableCompression:s,extensions:["gaikan","html"],layout:null},e.exports.set=u.set});var n=t("index");"undefined"!=typeof module?module.exports=n:gaikan=n}();