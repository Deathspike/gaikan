!function(){function e(){return e}function t(e,r){var i=t.resolve(e),a=t.modules[i];if(!a)throw new Error('failed to require "'+e+'" from '+r);return a.exports||(a.exports={},a.call(a.exports,a,a.exports,t.relative(i),n)),a.exports}var n=this;t.modules={},t.resolve=function(e){var n=e,r=e+".js",i=e+"/index.js";return t.modules[r]&&r||t.modules[i]&&i||n},t.register=function(e,n){t.modules[e]=n},t.relative=function(n){return function(r){if("debug"==r)return e;if("."!=r.charAt(0))return t(r);var i=n.split("/"),a=r.split("/");i.pop();for(var s=0;s<a.length;s++){var o=a[s];".."==o?i.pop():"."!=o&&i.push(o)}return t(i.join("/"),n)}},t.register("browser/index.js",function(e,t,n){"use strict";var r=n("./../compiler"),i=n("./../runtime");e.exports=function(e){return"(CLIENT-NOT-IMPLEMENTED("+e+"))"},e.exports.alterant=i.alterant,e.exports.compileFromString=function(t){var n=e.exports.options;return r(t,n.enableCompression)},e.exports.options={enableCompression:!1},e.exports.set=i.set}),t.register("compiler/analyzer/lexer-analyzer.js",function(e){"use strict";var t,n;e.exports=function(e){var t,r,i,a,s=!1,o=!1,u=0,l=null,f=0,p=[];for(r=0;r<e.length;r+=1)t=e.charAt(r),o?(s||"'"!==t&&'"'!==t||null!==l&&l!==t||(l=null===l?t:null),">"!==t||null!==l||s&&!/^-->$/.test(e.substr(r-2,3))||(n(p,e,u,r+1),s=o=!1,u=r+1)):"<"===t&&(i=e.substr(r,9),a=/^<!--/.test(i),(a||/^(<!DOCTYPE|<\/?[a-z])/i.test(i))&&(n(p,e,u,r),s=a,o=!0,u=r)),f=t;return n(p,e,u,e.length),p},t=function(e){var t,n,r,i,a,s,o,u,l,f=[],p=e.match(/^<[a-z0-9]+\s+?([\w\W]*?)\s?\/?>?$/i);if(p)for(u=-1,l=null,e=p[1],r=u+1;r<=e.length;r+=1)a=r===e.length,t=a?null:e.charAt(r),"'"!==t&&'"'!==t||null!==l&&l!==t||(l=null===l?t:null),(a||null===l&&/^\s$/.test(t))&&(n=e.substr(u+1,r-u-1),i=n.indexOf("="),-1!==i?(o={key:n.substr(0,i),quote:null,value:n.substr(i+1)},o.value.length&&/"|'/.test(o.value.charAt(0))&&(o.quote=o.value.charAt(0)),o.quote&&(s=o.value.length,o.value.charAt(0)===o.quote&&(o.value=o.value.substr(1),s-=1),o.value.charAt(s-1)===o.quote&&(o.value=o.value.substr(0,s-1),o.hasEndQuote=!0)),f.push(o)):"/"!==n&&f.push({key:n}),u=r);return f},n=function(e,n,r,i){if(r!==i){var a=n.substr(r,i-r),s={value:a,position:r,type:"element"};e.push(s),"<"===a[0]&&/>$/.test(a)?/^<!--/.test(a)?s.type="comment":/^<!DOCTYPE/i.test(a)?s.type="doctype":(s.name=a.match(/^<\/?([a-z0-9]*)/i)[1],s.name?(s.isBeginning=/^<[a-z0-9]/i.test(a),s.isBeginning?(s.attributes=t(a),s.isStandalone=/\/>$/.test(a)):(s.attributes=[],s.isStandalone=!1)):s.type="text"):s.type="text"}}}),t.register("compiler/analyzer/parser-analyzer.js",function(e){"use strict";var t,n,r;e.exports=function(e){return n(e,"script"),n(e,"style"),t(e),r(e)},t=function(e){var n,r,i,a,s,o,u=!1;for(n=0;n<e.length;n+=1)if(r=e[n],r.index=n,"undefined"==typeof r.association&&"element"===r.type&&r.isBeginning&&!r.isStandalone)for(i=n+1;i<e.length;i+=1)if(a=e[i],"undefined"==typeof a.association&&"element"===a.type&&!a.isBeginning&&r.name.toLowerCase()===a.name.toLowerCase())for(s=i-1;s>=n;s-=1)if(o=e[s],"undefined"==typeof o.association&&"element"===o.type&&o.isBeginning&&!o.isStandalone&&o.name.toLowerCase()===a.name.toLowerCase()){n===s&&(u=!0,r.association=i,a.association=n);break}u&&t(e)},n=function(e,t){var n,r,i=!1;for(n=0;n<e.length;n+=1)r=e[n],"element"!==r.type||r.isStandalone||r.name.toLowerCase()!==t.toLowerCase()?i&&(r.type="text",delete r.attributes,delete r.name,delete r.isBeginning,delete r.isStandalone):i=r.isBeginning},r=function(e){var t,n,r,i=0,a=[],s=[a];for(t=0;t<e.length;t+=1)r=e[t],n="undefined"!=typeof r.association,n&&r.association<t&&(i-=1,s.pop()),r.indent=i,s[s.length-1].push(r),n&&r.association>t&&(i+=1,r.children=[],s.push(r.children));return a}}),t.register("compiler/build-compiler.js",function(e,t,n){"use strict";var r,i,a,s,o,u,l,f,p,c=n("./emitter-compiler");e.exports=function(e,t){var n,i=[];for(n=0;n<e.length;n+=1)r(i,e,e[n]);return new Function("__r","root","__f",s(i,t).join("\n"))},r=function(e,t,n){var a,s,o,u;switch(n.type){case"element":if(n.isBeginning&&(a=n.attributes,o=e.length,n.attributes=i(e,t,n),o!==e.length&&(u=e.splice(o,e.length-o)),f(e,n),n.attributes=a,u))for(s=0;s<u.length;s+=1)e.push(u[s]);if(n.children)for(s=0;s<n.children.length;s+=1)r(e,t,n.children[s]);n.isBeginning||(i(e,t,n),f(e,n));break;case"text":f(e,n);break;default:e.push({type:"text",value:n.value})}},i=function(e,t,n){var r,i,a,s,f,p=[];if(n.isBeginning)p=n.attributes.slice(0);else if("undefined"!=typeof n.association)for(a=0;a<t.length;a+=1)null!==(i=o(t[a],n.association))&&(p=i.attributes.slice(0));for(a=0;a<p.length;a+=1){r=p[a],f=r.key.toLowerCase();for(s in c)if(c.hasOwnProperty(s)&&new RegExp("^"+s+"$").test(f)){c[s](e,n,r,u,l)&&(p.splice(a,1),a-=1);break}}return p},a=function(e,t){var n;for(n=0;n<e.length;n+=1)if(e[n].value&&-1!==e[n].value.indexOf(t))return!0;return!1},s=function(e,t){var n,r,i,s,o,u=1,f=e.slice(0);for(f.unshift({value:"var __o = '';"}),f.push({value:"return __o;"}),a(e,"set")&&f.unshift({value:"var set = __r.set;"}),a(e,"alterant")&&f.unshift({value:"var alterant = __r.alterant;"}),n=0,s=1;n<f.length;n+=1,s+=1)s<f.length&&"text"===f[n].type&&"text"===f[s].type?(f[n].value+=f[s].value,f.splice(s,1),n-=1,s-=1):"text"===f[n].type&&(t&&(f[n].value=f[n].value.replace(/\s+/g," ")),f[n].value="'"+l(f[n].value)+"'");for(n=0,s=1;n<f.length;n+=1,s+=1)o=f[n].type,r="var"===o||"text"===o,s<f.length&&r&&("var"===f[s].type||"text"===f[s].type)?(f[n].value+=" + "+f[s].value,f.splice(s,1),n-=1,s-=1):r&&(f[n].value="__o += "+f[n].value+";");for(n=0;n<f.length;n+=1)if(f[n].indent<0&&(u-=-f[n].indent),"undefined"==typeof f[n].value)f.splice(n,1),n-=1;else{for(i=0;u>i;i+=1)f[n].value="	"+f[n].value;f[n].indent>0&&(u+=f[n].indent),f[n]=f[n].value}return f},o=function(e,t){if(e.index===t)return e;if(e.children){var n,r;for(n=0;n<e.children.length;n+=1)if(r=o(e.children[n],t))return r}return null},u=function(){var e=arguments;return this.replace(/\{(\d+)\}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})},l=function(e){var t,n="";for(t=0;t<e.length;t+=1)switch(e.charAt(t)){case"'":n+="\\'";break;case"\\":n+="\\\\";break;case"\b":n+="\\b";break;case"\f":n+="\\f";break;case"\n":n+="\\n";break;case"\r":n+="\\r";break;case"	":n+="\\t";break;default:n+=e.charAt(t)}return n},f=function(e,t){var n,r,i,a,s,o,u=t.value;if("element"===t.type){if(!t.name)return;for(u=(t.isBeginning?"<":"</")+t.name,s=0;s<t.attributes.length;s+=1)if(n=t.attributes[s],r=n.quote||"",a=n.hasEndQuote?r:"",u+=" "+n.key,"undefined"!=typeof n.value)if(i=[],n.value=p(i,n.value,!0),i.length){for(u+="="+r,e.push({type:"text",value:u}),o=0;o<i.length;o+=1)e.push(i[o]);u=n.value+a}else u+="="+r+n.value+a;t.disableClosingTag||(u+=t.isStandalone?" />":">")}else"text"===t.type&&(u=p(e,u));u&&e.push({type:"text",value:u})},p=function(e,t,n){var r,i,a,s,o,l,f,p,c,d,v=-1,g=/(@|\#|\!)\{([\w\W]+?)\}/g;for(l=function(e,t){return u.call(e,s,d,t)};null!==(a=g.exec(t));){if(c=a[1],s=a[2],0!==a.index&&(f=-1===v?0:v,o=t.substr(f,a.index-f),o&&e.push({type:"text",value:o})),"@"===c)e.push({type:n?"var":"emit",value:n?"("+s+")":s});else{if(d=s,-1!==(i=s.search(/[|,]/)))for(p=s.substr(i+1).split(/[|,]/),s=d=d.substr(0,i),"#"===c&&(d=l("alterant.encode({1})")),r=0;r<p.length;r+=1)(p[r]=p[r].trim()).length&&(d=l("alterant.{2}({1})",p[r]));else"#"===c&&(d=l("alterant.encode({1})"));e.push({type:"var",value:l("(typeof {0} === 'undefined' ? '' : {1})")})}v=a.index+a[0].length}return-1===v?t:t.substr(v)}}),t.register("compiler/emitter-compiler.js",function(e,t,n){"use strict";e.exports={"data-attribute-[\\w\\W]+":n("./emitter/attribute-emitter"),"data-evaluate":n("./emitter/evaluate-emitter"),"data-extract":n("./emitter/extract-emitter"),"data-for":n("./emitter/for-emitter"),"data-fragment":n("./emitter/fragment-emitter"),"data-if":n("./emitter/if-emitter"),"data-include":n("./emitter/include-emitter")}}),t.register("compiler/emitter/attribute-emitter.js",function(e){"use strict";e.exports=function(e,t,n,r,i){if(t.disableClosingTag=t.isBeginning,e.attributeStates||(e.attributeStates=[]),!t.isBeginning){var a=e.attributeStates.pop();return e.splice(a+1,0,{indent:-1,type:"if",value:"}"}),e.splice(a+2,0,{type:"text",value:t.isStandalone?" />":">"}),!0}if("undefined"!=typeof t.association&&!t.isStandalone){var s=n.key.match(/^[\w\W]+-([\w\W]+?)$/)[1];return e.push({indent:1,type:"attribute",value:r.call("if ({0}) {",n.value||!1)}),e.push({type:"attribute",value:r.call("__o += ' {0}';",i(s))}),e.attributeStates.push(e.length),!0}return!1}}),t.register("compiler/emitter/evaluate-emitter.js",function(e){"use strict";var t;e.exports=function(e,n){return"undefined"==typeof n.association||n.isStandalone?!1:(delete n.name,t(e,n),!0)},t=function(e,n){if(n.children){var r,i;for(i=0;i<n.children.length;i+=1)r=n.children[i],e.push({type:"eval",value:r.value}),delete r.name,delete r.value,t(e,r)}}}),t.register("compiler/emitter/extract-emitter.js",function(e){"use strict";e.exports=function(e,t){return delete t.name,!0}}),t.register("compiler/emitter/for-emitter.js",function(e){"use strict";e.exports=function(e,t,n,r){var i,a=/^([\w\W]+?)(,\s*([\w\W]*))?\s(in|of)\s([\w\W]+)$/i,s=(n.value||"").match(a);if("undefined"!=typeof t.association&&null!==s){if(!t.isBeginning)return"of"===s[4].toLowerCase()&&e.push({indent:-1,type:"for",value:"}"}),e.push({indent:-1,type:"for",value:"}"}),e.push({indent:-1,type:"for",value:"}"}),!0;if(!t.isStandalone)return i=function(e){return r.call(e,"__v"+t.index,s[1],s[3]||"__k"+t.index,s[5])},e.push({type:"for",value:i("var {0} = {3};")}),e.push({indent:1,type:"for",value:i("if ({0}) {")}),"of"===s[4].toLowerCase()?(e.push({indent:1,type:"for",value:i("for (var {2} in {0}) {")}),e.push({indent:1,type:"for",value:i("if ({0}.hasOwnProperty({2})) {")})):e.push({indent:1,type:"for",value:i("for (var {2} = 0; {2} < {0}.length; {2} += 1) {")}),e.push({type:"for",value:i("var {1} = {0}[{2}];")}),!0}return!1}}),t.register("compiler/emitter/fragment-emitter.js",function(e){"use strict";var t;e.exports=function(e,n,r,i,a){var s,o=e.states;return r.value&&"undefined"!=typeof n.association?(o&&o.length?(s=e.states[e.states.length-1],n.isBeginning?(e.push({indent:1,type:"fragment",value:i.call("{0}['{1}'] = function (__r, root) {",s.fragment,a(r.value))}),e.push({type:"fragment",value:"var __o = '';"})):(e.push({type:"fragment",value:"return __o;"}),e.push({indent:-1,type:"fragment",value:"};"}))):n.isBeginning?(e.push({indent:1,type:"fragment",value:i.call("if (__f && __f['{0}']) {",a(r.value))}),e.push({type:"fragment",value:i.call("__o += __f['{0}'](__r, root);",a(r.value))})):(e.push({indent:-1,type:"fragment",value:"}"}),t(e)),!0):!1},t=function(e){var t,n,r,i=0;for(t=e.length-1;t>=0&&(n=e[t].indent,r=e[t].type,"undefined"==typeof n||"fragment"!==r||(i-=n,0!==i));t-=1)"fragment"!==r&&e.splice(t,1)}}),t.register("compiler/emitter/if-emitter.js",function(e){"use strict";e.exports=function(e,t,n,r){return t.isBeginning?"undefined"==typeof t.association||t.isStandalone?!1:(e.push({indent:1,type:"if",value:r.call("if ({0}) {",n.value||!1)}),!0):(e.push({indent:-1,type:"if",value:"}"}),!0)}}),t.register("compiler/emitter/include-emitter.js",function(e){"use strict";var t,n;e.exports=function(e,r,i,a,s){var o,u,l=e.states;return l||(l=e.states=[]),i.value?(r.isBeginning?(u=i.value.split(/[|,]/,2),o={hasPartial:t(r),fragment:"__f"+r.index,type:"include",variable:2===u.length?u[1]||"root":"root",value:u[0]},"undefined"==typeof r.association||r.association===r.index+1?(("undefined"==typeof r.association||r.isStandalone)&&delete r.name,e.push({type:"include",value:a.call("__o += __r('{0}', {1});",s(o.value),o.variable)})):o.hasPartial?(l.push(o),e.push({includeIndent:1,type:"include",value:a.call("var {0} = {};",o.fragment)})):(l.push(o),e.push({indent:1,type:"include",value:a.call("__o += __r('{0}', {1});",s(o.value),o.variable)}))):r.association!==r.index-1&&(o=l.pop(),o.hasPartial?(e.push({type:"include",value:a.call("__o += __r('{0}', {1}, {2});",s(o.value),o.variable,o.fragment)}),e.push({includeIndent:-1,type:"include"})):e.push({indent:-1,type:"include"}),n(e)),!0):!1},t=function(e){var n;if(e.attributes)for(n=0;n<e.attributes.length;n+=1)if("data-fragment"===e.attributes[n].key.toLowerCase())return!0;if(e.children)for(n=0;n<e.children.length;n+=1)if(t(e.children[n]))return!0;return!1},n=function(e){var t,n,r,i,a=0,s=0;for(n=e.length-1;n>=0&&(r=e[n].indent||e[n].includeIndent,t=!1,i=e[n].type,"undefined"==typeof r||("fragment"===i&&(s-=r),"include"!==i||(t=a>s+1&&"fragment"!==i,a-=r,0!==a)));n-=1)(a>s&&"include"!==i&&"fragment"!==i||a>s+1&&"fragment"!==i||t)&&e.splice(n,1)}}),t.register("compiler/index.js",function(e,t,n){"use strict";var r=n("./build-compiler"),i=n("./analyzer/lexer-analyzer"),a=n("./analyzer/parser-analyzer");e.exports=function(e,t){var n=i(e),s=a(n);return r(s,t)}}),t.register("index.js",function(e,t,n){e.exports=n("undefined"==typeof window?"./server":"./browser")}),t.register("runtime/alterant/break-alterant.js",function(e){"use strict";e.exports=function(e){return"string"!=typeof e?e:e.replace(/\n/g,"<br />")}}),t.register("runtime/alterant/decode-alterant.js",function(e){"use strict";e.exports=function(e){return"string"!=typeof e?e:e.replace(/&#([0-9]{2});/g,function(e,t){return String.fromCharCode(parseInt(t,10))})}}),t.register("runtime/alterant/encode-alterant.js",function(e){"use strict";var t=/[&<>"]/,n=/&/g,r=/</g,i=/>/g,a=/"/g;e.exports=function(e){return"string"==typeof e&&t.test(e)?e.replace(n,"&#38;").replace(r,"&#60;").replace(i,"&#62;").replace(a,"&#34;"):e}}),t.register("runtime/alterant/encode-windows-alterant.js",function(e){"use strict";var t=/[&<>"]/g,n={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;"};e.exports=function(e){return"string"==typeof e&&t.test(e)?e.replace(t,function(e){return n[e]}):e}}),t.register("runtime/alterant/lower-alterant.js",function(e){"use strict";e.exports=function(e){return"string"!=typeof e?e:e.toLowerCase()}}),t.register("runtime/alterant/title-alterant.js",function(e){"use strict";e.exports=function(e){return"string"!=typeof e?e:e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}}),t.register("runtime/alterant/upper-alterant.js",function(e){"use strict";e.exports=function(e){return"string"!=typeof e?e:e.toUpperCase()}}),t.register("runtime/alterant/url-alterant.js",function(e){"use strict";e.exports=function(e){return encodeURIComponent(e)}}),t.register("runtime/index.js",function(e,t,n){"use strict";var r="undefined"!=typeof process&&/win/.test(process.platform),i=r?"windows-alterant":"alterant";e.exports=function(e){return"(UNRESOLVED-TEMPLATE("+e+"))"},e.exports.alterant={"break":n("./alterant/break-alterant"),decode:n("./alterant/decode-alterant"),encode:n("./alterant/encode-"+i),lower:n("./alterant/lower-alterant"),title:n("./alterant/title-alterant"),upper:n("./alterant/upper-alterant"),url:n("./alterant/url-alterant")},e.exports.set={empty:n("./set/empty-set"),sort:n("./set/sort-set")}}),t.register("runtime/set/empty-set.js",function(e){"use strict";e.exports=function(e){var t;if(!e)return!0;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}}),t.register("runtime/set/sort-set.js",function(e){"use strict";e.exports=function(e,t,n){if("boolean"!=typeof t&&(n=t,t=!1),e)if(e instanceof Array)e.length>1&&(n?e.sort(function(e,t){var r=e[n],i=t[n];return i>r?-1:r>i?1:0}):e.sort(),t&&e.reverse());else if(e instanceof Object){var r,i,a,s=[];for(r in e)e.hasOwnProperty(r)&&s.push(r);if(s.length>1){for(a={},s.sort(),t&&s.reverse(),i=0;i<s.length;i+=1)a[s[i]]=e[s[i]];return a}}return e}}),t.register("server/index.js",function(e,t,n){"use strict";var r={},i=n("./../compiler"),a=n("fs"),s="production"===process.env.NODE_ENV,o=n("path"),u=n("./../runtime");e.exports=function(t,n,r,i,a){var s,o=e.exports.options,u=e.exports.compileFromFile(t);return"function"==typeof r&&(i=r,r={}),"boolean"==typeof i&&(a=i,i=null),s=!o.layout||a?u(e.exports,n,r||{}):e.exports(o.layout,n,{content:function(e,t){return u(e,t,r||{})}},!0),i?setImmediate(i,null,s):s},e.exports.alterant=u.alterant,e.exports.compileFromFile=function(t){var s,u,l,f=e.exports.options;return f.enableCache&&"undefined"!=typeof r[t]?r[t]:(s=function(){var r,i,s,u,l,f=o.dirname(n.main.filename),p=e.exports.options.directories,c=e.exports.options.extensions;for(u=0;u<p.length;u+=1)for(r=o.join(f,p[u]),l=0;l<c.length;l+=1)if(i=t+"."+c[l],s=o.join(r,i),a.existsSync(s))return s;return a.existsSync(t)?t:null}(),s?(u=a.readFileSync(s,"utf8"),l=i(u,f.enableCompression),f.enableCache&&(r[t]=l),l):function(){return"(UNRESOLVED-TEMPLATE("+t+"))"})},e.exports.compileFromString=function(t){var n=e.exports.options;return i(t,n.enableCompression)},e.exports.options={directories:["views","."],enableCache:s,enableCompression:s,extensions:["gaikan","html"],layout:null},e.exports.set=u.set});var r=t("index");"undefined"!=typeof module?module.exports=r:gaikan=r}();